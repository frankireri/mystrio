# Database Schema for Mystrio API

This document outlines the structure of the MySQL/MariaDB database used by the Mystrio backend API.

---

## Table: `users`

Stores user authentication and profile information.

```sql
CREATE TABLE users (
  id INT AUTO_INCREMENT PRIMARY KEY,
  username VARCHAR(255) NOT NULL,
  email VARCHAR(255) NOT NULL UNIQUE,
  password VARCHAR(255) NOT NULL, -- Hashed password using bcrypt
  chosen_question_text TEXT, -- User's chosen default question text
  chosen_question_style_id VARCHAR(255), -- ID for the chosen question card style
  profile_image_path VARCHAR(255), -- Path to the user's profile image
  premium_until TIMESTAMP NULL DEFAULT NULL, -- New: Timestamp when premium access expires
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);
```

**Columns:**
*   `id` (INT, PRIMARY KEY, AUTO_INCREMENT): Unique identifier for the user.
*   `username` (VARCHAR(255), NOT NULL): User's chosen display name.
*   `email` (VARCHAR(255), NOT NULL, UNIQUE): User's email address, used for login. Must be unique.
*   `password` (VARCHAR(255), NOT NULL): Hashed password.
*   `chosen_question_text` (TEXT): The default question text chosen by the user. Can be NULL.
*   `chosen_question_style_id` (VARCHAR(255)): Identifier for the style of the user's question card. Can be NULL.
*   `profile_image_path` (VARCHAR(255)): URL or path to the user's profile image. Can be NULL.
*   `premium_until` (TIMESTAMP, NULL, DEFAULT NULL): Timestamp indicating when premium access expires. NULL if not premium.
*   `created_at` (TIMESTAMP): Timestamp when the user account was created.
*   `updated_at` (TIMESTAMP): Timestamp when the user account was last updated.

---

## Table: `questions` (Planned)

Stores questions asked by users and their corresponding answers.

```sql
CREATE TABLE questions (
  id INT AUTO_INCREMENT PRIMARY KEY,
  user_id INT NOT NULL,
  question_text TEXT NOT NULL,
  answer_text TEXT, -- Nullable, as questions might be unanswered
  is_from_ai BOOLEAN DEFAULT FALSE,
  hints TEXT, -- Stores additional metadata as a JSON string (TEXT type for broader compatibility)
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
);
```

**Columns:**
*   `id` (INT, PRIMARY KEY, AUTO_INCREMENT): Unique identifier for the question.
*   `user_id` (INT, NOT NULL): Foreign key referencing the `id` in the `users` table. `ON DELETE CASCADE` means if the user is deleted, their questions are also deleted.
*   `question_text` (TEXT, NOT NULL): The content of the question.
*   `answer_text` (TEXT): The answer to the question. Can be NULL.
*   `is_from_ai` (BOOLEAN, DEFAULT FALSE): Indicates if the question was generated by AI.
*   `hints` (TEXT): Stores additional data (e.g., context, metadata) as a JSON string. Stored as TEXT for compatibility.
*   `created_at` (TIMESTAMP): Timestamp when the question was created.
*   `updated_at` (TIMESTAMP): Timestamp when the question was last updated.

---
